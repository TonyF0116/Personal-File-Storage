(function(){var t={7232:function(t,e,a){"use strict";var n=a(9242),i=a(3396);const o={id:"app"};function s(t,e,a,n,s,r){const u=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(u)])}var r={name:"App"},u=a(89);const p=(0,u.Z)(r,[["render",s]]);var l=p,c=a(2483),d=a(7139);const h={key:0},_={class:"page_title"},g={key:0},m=(0,i._)("h2",null,"Customize your avatar and nickname!",-1),f={class:"nickname"},v=(0,i._)("label",{for:"nickname"},"Nickname ",-1),w=(0,i._)("label",{for:"avatar_input",class:"choose_avatar_button"},"Choose Avatar",-1),y=["src"],b={style:{"margin-top":"-400px"}},k={style:{"margin-top":"40%"}},z={key:1},D={style:{color:"red"}},x={class:"popup_content"},A={class:"form_group"},q=(0,i._)("label",{for:"username"},"Username ",-1),Z={class:"form_group"},$=(0,i._)("label",{for:"password"},"Password ",-1),P={style:{"font-size":"medium",color:"red"}},C={key:0},O={key:1};function j(t,e,a,o,s,r){return null==s.authorization_token||s.new_user?((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("div",_,(0,d.zw)(s.page_title),1),s.new_user?((0,i.wg)(),(0,i.iD)("div",g,[m,(0,i._)("div",f,[v,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.nickname=t),id:"nickname"},null,512),[[n.nr,s.nickname]])]),(0,i._)("input",{type:"file",id:"avatar_input",onChange:e[1]||(e[1]=(...t)=>r.choose_avatar_clicked&&r.choose_avatar_clicked(...t)),accept:".jpg, .jpeg, .png"},null,32),w,s.avatar?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"preview_avatar",src:s.avatar,alt:"Image"},null,8,y)):(0,i.kq)("",!0),(0,i._)("h4",b,(0,d.zw)(s.file_upload_message),1),(0,i._)("button",{class:"submit_button",onClick:e[2]||(e[2]=(...t)=>r.submit&&r.submit(...t))},"Finished!"),(0,i._)("h3",k,(0,d.zw)(s.submit_message),1)])):((0,i.wg)(),(0,i.iD)("div",z,[(0,i._)("button",{class:"login_button",onClick:e[3]||(e[3]=(...t)=>r.toggle_popup_login&&r.toggle_popup_login(...t))},"Login"),(0,i._)("button",{class:"signup_button",onClick:e[4]||(e[4]=(...t)=>r.toggle_popup_signup&&r.toggle_popup_signup(...t))},"Sign up"),(0,i._)("h2",D,(0,d.zw)(s.account_warning_msg),1),(0,i.Wm)(n.uT,{name:"fade"},{default:(0,i.w5)((()=>[s.is_popup_visible?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"popup",onClick:e[11]||(e[11]=(0,n.iM)(((...t)=>r.closePopup&&r.closePopup(...t)),["self"]))},[(0,i._)("div",x,[(0,i._)("div",A,[q,(0,i.wy)((0,i._)("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":e[5]||(e[5]=t=>s.username=t),onKeyup:e[6]||(e[6]=(0,n.D2)(((...t)=>r.enter_handler&&r.enter_handler(...t)),["enter"]))},null,544),[[n.nr,s.username]])]),(0,i._)("div",Z,[$,(0,i.wy)((0,i._)("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":e[7]||(e[7]=t=>s.password=t),onKeyup:e[8]||(e[8]=(0,n.D2)(((...t)=>r.enter_handler&&r.enter_handler(...t)),["enter"]))},null,544),[[n.nr,s.password]])]),(0,i._)("div",P,(0,d.zw)(s.warning),1),s.login_pressed?((0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("button",{class:"popup_button",onClick:e[9]||(e[9]=(...t)=>r.login&&r.login(...t))},"Login")])):((0,i.wg)(),(0,i.iD)("div",O,[(0,i._)("button",{class:"popup_button",onClick:e[10]||(e[10]=(...t)=>r.signup&&r.signup(...t))},"Sign up")]))])])):(0,i.kq)("",!0)])),_:1})]))])):(0,i.kq)("",!0)}a(7658);var U=a(9002),E=a.n(U),T=a(4161);T.Z.defaults.baseURL="http://127.0.0.1:5000";var F={data(){return{page_title:"Welcome!",is_popup_visible:!1,login_pressed:!0,username:"",password:"",warning:"",new_user:!1,account_id:0,avatar:null,file_upload_message:"",nickname:"",submit_message:"",avatar_data:null,avatar_name:"",account_warning_msg:"",authorization_token:""}},mounted(){""!=this.$route.query.Authorization&&(this.authorization_token=this.$route.query.Authorization,T.Z.defaults.headers.common["Authorization"]=this.$route.query.Authorization,this.initialize_account_page()),this.account_warning_msg=this.$route.query.warning},methods:{initialize_account_page(){T.Z.post("/api/account?redirection="+this.$route.query.redirection).then((t=>{console.log(t),"Authorized"==t.data.msg&&this.$router.push({path:this.$route.query.redirection,query:{Authorization:t.headers.authorization}})}),(t=>{console.log(t)}))},submit(){if(this.submit_message="",""==this.nickname)return void(this.submit_message="Empty nickname");if(null==this.avatar)return void(this.submit_message="No avatar chosen");const t=new FormData;t.append("avatar",this.avatar_data),t.append("avatar_name",this.avatar_name),t.append("nickname",this.nickname),t.append("account_id",this.account_id),this.submit_message="Submitting",T.Z.post("/api/account/new_user_info",t).then((t=>{this.submit_message=t.data.msg,this.$router.push({path:"/index",query:{Authorization:this.authorization_token}})}),(t=>{console.log(t)}))},choose_avatar_clicked(t){const e=t.target.files[0];if(this.file_upload_message="",this.avatar=null,this.avatar_name=e.name,e)if(["image/jpg","image/jpeg","image/png"].includes(e.type)){const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{this.avatar=t.result,this.avatar_data=t.result.split(",")[1]}}else this.file_upload_message="Invalid file type"},enter_handler(){this.login_pressed?this.login():this.signup()},toggle_popup_login(){this.is_popup_visible=!0,this.login_pressed=!0},toggle_popup_signup(){this.is_popup_visible=!0,this.login_pressed=!1},closePopup(){this.is_popup_visible=!1,this.username="",this.password="",this.warning=""},check_empty(){return this.warning="",""==this.username?"Username can not be empty":""==this.password?"Password can not be empty":""},login(){if(""!=this.check_empty())return void(this.warning=this.check_empty());const t=new FormData;t.append("username",this.username),t.append("password_hash",E()(this.password).toString()),T.Z.post("/api/account/login",t).then((t=>{console.log(t),this.$router.push({path:t.data.data.redirection,query:{Authorization:t.headers.authorization}})}),(t=>{this.warning=t.response.data.msg,console.log(t)}))},signup(){if(""!=this.check_empty())return void(this.warning=this.check_empty());const t=new FormData;t.append("username",this.username),t.append("password_hash",E()(this.password).toString()),T.Z.post("/api/account/signup",t).then((t=>{console.log(t),this.new_user=!0,this.account_id=t.data.data.account_id,this.authorization_token=t.headers.authorization}),(t=>{this.warning=t.response.data.msg,console.log(t)}))}}};const L=(0,u.Z)(F,[["render",j]]);var R=L;const S={class:"page_title"};function I(t,e,a,n,o,s){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",S,(0,d.zw)(o.page_title),1),(0,i._)("button",{onClick:e[0]||(e[0]=(...t)=>s.goToEditPage&&s.goToEditPage(...t))},"Go To Edit Page"),(0,i._)("h1",null,(0,d.zw)(o.account_id),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.files,(t=>((0,i.wg)(),(0,i.iD)("ol",{key:t},[(0,i._)("li",null,(0,d.zw)(t[2]),1)])))),128))],64)}T.Z.defaults.baseURL="http://127.0.0.1:5000";var K={data(){return{page_title:"Index Page",account_id:0,name:"",administration:0,avatar_suffix:"",files:null}},mounted(){T.Z.defaults.headers.common["Authorization"]=this.$route.query.Authorization,this.initialize_index_page()},methods:{initialize_index_page(){T.Z.post("/api/index",{}).then((t=>{console.log(t),this.account_id=t.data.data.user_info[0][0],this.name=t.data.data.user_info[0][2],null==this.name&&t.data.data.user_info[0][1],this.administration=t.data.data.user_info[0][3],this.avatar_suffix=t.data.data.user_info[0][4],this.files=t.data.data.user_files}),(t=>{console.log(t),302!=t.response.status&&401!=t.response.status||this.$router.push(t.response.data.data.redirection)}))},goToEditPage(){this.$router.push({path:"/edit",query:{Authorization:this.$route.query.Authorization}})}}};const V=(0,u.Z)(K,[["render",I]]);var W=V;const H={class:"page_title"};function M(t,e,a,n,o,s){return(0,i.wg)(),(0,i.iD)("div",H,(0,d.zw)(o.page_title),1)}T.Z.defaults.baseURL="http://127.0.0.1:5000";var N={data(){return{page_title:"Edit Page"}},mounted(){T.Z.defaults.headers.common["Authorization"]=this.$route.query.Authorization,this.initialize_edit_page()},methods:{initialize_edit_page(){T.Z.post("/api/edit",{}).then((t=>{console.log(t)}),(t=>{console.log(t),302!=t.response.status&&401!=t.response.status||this.$router.push(t.response.data.data.redirection)}))}}};const Y=(0,u.Z)(N,[["render",M]]);var G=Y;const B=[{path:"/",redirect:"/index"},{path:"/account",component:R},{path:"/index",component:W},{path:"/edit",component:G}],J=(0,c.p7)({history:(0,c.PO)(),routes:B});var Q=J;(0,n.ri)(l).use(Q).mount("#app")},2480:function(){}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,o){if(!n){var s=1/0;for(l=0;l<t.length;l++){n=t[l][0],i=t[l][1],o=t[l][2];for(var r=!0,u=0;u<n.length;u++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[u])}))?n.splice(u--,1):(r=!1,o<s&&(s=o));if(r){t.splice(l--,1);var p=i();void 0!==p&&(e=p)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[n,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,o,s=n[0],r=n[1],u=n[2],p=0;if(s.some((function(e){return 0!==t[e]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(u)var l=u(a)}for(e&&e(n);p<s.length;p++)o=s[p],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(l)},n=self["webpackChunkpersonal_file_storage"]=self["webpackChunkpersonal_file_storage"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7232)}));n=a.O(n)})();
//# sourceMappingURL=app.460fcc57.js.map